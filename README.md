# rese-api

飲食店予約サービスのバックエンドです。

## プロジェクトセットアップ
```
git clone https://github.com/tekpro-s/rese-api.git rese-api
cd rese-api/
composer install
```
## MySQL接続・マイグレーション・シーディング
ターミナルでMySQL設定
```
CREATE DATABASE dbpj;
USE dbpj;
quit;
```

.env.exampleをもとに.envを作成し、MySQL接続情報を設定
```
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=dbpj
DB_USERNAME=root
DB_PASSWORD=（MySQLのパスワード）
```

マイグレーション
```
php artisan migrate
```

シーディング
```
php artisan db:seed
```


## Laravelサーバー立ち上げ
```
php artisan serve
```

## 追加課題で実装した機能
```
・バリデーション機能：　フロントエンド・バックエンド双方で入力値の不備をチェック
・コメント機能：　ユーザが予約した店舗に対して、詳細画面から評価コメントを投稿・修正・削除できる。現在日時が予約日時以前の場合はコメント不可
店舗代表者画面：　店舗代表者権限を持つユーザーの場合、店舗代表者ログイン画面からログインし、店舗代表者画面で店舗の追加・更新が可能
・管理者画面：　管理者権限を持つユーザーの場合、管理者ログイン画面からログインし、管理画面で店舗代表者ユーザーの作成が可能
```

## 現状の問題点・今後の課題
```
・デプロイ後にシーディングした場合、clearDBの仕様でデータベースのidが5,15,25……と登録されるため、そのままでは動作しない（SQLでIDを設定し直す必要がある）
・店舗代表者画面で、店舗を削除できない（単にDB上からDELETEするのではなく、削除フラグを新規に設定することで非表示にし、後から復旧できるようにする）
・店舗代表者画面で追加した店舗の場合、いいねボタン押下時にエラーとなる（デプロイ後に使用しているclearDBの仕様で、データベースのIDが連番ではなく5,15,25……と登録される影響で発生）
・店舗代表者画面で、店舗ごとの予約情報を見れるようにする
・店舗情報一覧にページネーションを追加する
・ログイン認証時にJSON Web Tokenを使用する
```
